\doxysection{src/util/pennfat\+\_\+kernel.h File Reference}
\hypertarget{pennfat__kernel_8h}{}\label{pennfat__kernel_8h}\index{src/util/pennfat\_kernel.h@{src/util/pennfat\_kernel.h}}
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
{\ttfamily \#include "{}../pennfat.\+h"{}}\newline
{\ttfamily \#include "{}spthread.\+h"{}}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structdirectory__entries}{directory\+\_\+entries}}
\item 
struct \mbox{\hyperlink{structfile__descriptor__st}{file\+\_\+descriptor\+\_\+st}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{pennfat__kernel_8h_a42dd65bff5e0d98e3d17b523e65b9e06}{MAX\+\_\+\+FD\+\_\+\+NUM}}~1024
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structfile__descriptor__st}{file\+\_\+descriptor\+\_\+st}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{pennfat__kernel_8h_a25ad4d01d5ade905b2bfce04910a5c0d}{create\+\_\+file\+\_\+descriptor}} (int fd, char \texorpdfstring{$\ast$}{*}fname, int mode, int offset)
\item 
void \mbox{\hyperlink{pennfat__kernel_8h_a2d501c304eeba5035c83c1e2a4aec4fb}{lseek\+\_\+to\+\_\+root\+\_\+directory}} ()
\item 
int \mbox{\hyperlink{pennfat__kernel_8h_addbc36d23ce41b02cb1508bf85ca24e2}{get\+\_\+first\+\_\+empty\+\_\+fat\+\_\+index}} ()
\item 
int \mbox{\hyperlink{pennfat__kernel_8h_a4d2cf4232cddee738996ca9ad83ea56f}{k\+\_\+open}} (const char \texorpdfstring{$\ast$}{*}fname, int mode)
\begin{DoxyCompactList}\small\item\em Open file name {\ttfamily fname} with the mode {\ttfamily mode}, and return a file descriptor to that file. \end{DoxyCompactList}\item 
ssize\+\_\+t \mbox{\hyperlink{pennfat__kernel_8h_a1951ec11865274b45144d6dd6f878692}{k\+\_\+read}} (int fd, int n, char \texorpdfstring{$\ast$}{*}buf)
\item 
ssize\+\_\+t \mbox{\hyperlink{pennfat__kernel_8h_a79d2a9b65d0e04de358fe1a2cfa79baf}{k\+\_\+write}} (int fd, const char \texorpdfstring{$\ast$}{*}str, int n)
\item 
int \mbox{\hyperlink{pennfat__kernel_8h_a9ecd38dc6f3a9721ab53ff9a815b5480}{k\+\_\+close}} (int fd)
\item 
int \mbox{\hyperlink{pennfat__kernel_8h_ae8b44b3621ebb542bec49f73d19d2885}{k\+\_\+unlink}} (const char \texorpdfstring{$\ast$}{*}fname)
\item 
off\+\_\+t \mbox{\hyperlink{pennfat__kernel_8h_a332b4729ef52b2a3132b1aea88fa5c96}{k\+\_\+lseek}} (int fd, int offset, int whence)
\item 
void \mbox{\hyperlink{pennfat__kernel_8h_a9317fe11a36bfc2d731bcbacc3a57728}{k\+\_\+ls}} (const char \texorpdfstring{$\ast$}{*}filename)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{pennfat__kernel_8h_a0e52a1a113ded7f4787290edc22ad954}{fat}}
\item 
struct \mbox{\hyperlink{structfile__descriptor__st}{file\+\_\+descriptor\+\_\+st}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{pennfat__kernel_8h_aaa044c9a05adf7c4c653586036be5bd7}{global\+\_\+fd\+\_\+table}}
\item 
int \mbox{\hyperlink{pennfat__kernel_8h_a64b57b29bcc87a7b1967c7d55e7d4212}{fs\+\_\+fd}}
\item 
int \mbox{\hyperlink{pennfat__kernel_8h_a70b27761c7d0bd5cd90f4fe47e569b94}{block\+\_\+size}}
\item 
int \mbox{\hyperlink{pennfat__kernel_8h_a6a5f2839b4852a1e8b5c0b10ec6caa5b}{fat\+\_\+size}}
\item 
int \mbox{\hyperlink{pennfat__kernel_8h_af866bcf6c2272c2f6b1b7e5ad3a2e127}{num\+\_\+fat\+\_\+entries}}
\item 
int \mbox{\hyperlink{pennfat__kernel_8h_af69e180c878a9c8f4e45ec7dc25a062f}{data\+\_\+size}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{pennfat__kernel_8h_a42dd65bff5e0d98e3d17b523e65b9e06}\label{pennfat__kernel_8h_a42dd65bff5e0d98e3d17b523e65b9e06} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!MAX\_FD\_NUM@{MAX\_FD\_NUM}}
\index{MAX\_FD\_NUM@{MAX\_FD\_NUM}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{MAX\_FD\_NUM}{MAX\_FD\_NUM}}
{\footnotesize\ttfamily \#define MAX\+\_\+\+FD\+\_\+\+NUM~1024}



\doxysubsection{Function Documentation}
\Hypertarget{pennfat__kernel_8h_a25ad4d01d5ade905b2bfce04910a5c0d}\label{pennfat__kernel_8h_a25ad4d01d5ade905b2bfce04910a5c0d} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!create\_file\_descriptor@{create\_file\_descriptor}}
\index{create\_file\_descriptor@{create\_file\_descriptor}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{create\_file\_descriptor()}{create\_file\_descriptor()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structfile__descriptor__st}{file\+\_\+descriptor\+\_\+st}} \texorpdfstring{$\ast$}{*} create\+\_\+file\+\_\+descriptor (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{char \texorpdfstring{$\ast$}{*}}]{fname,  }\item[{int}]{mode,  }\item[{int}]{offset }\end{DoxyParamCaption})}

\Hypertarget{pennfat__kernel_8h_addbc36d23ce41b02cb1508bf85ca24e2}\label{pennfat__kernel_8h_addbc36d23ce41b02cb1508bf85ca24e2} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!get\_first\_empty\_fat\_index@{get\_first\_empty\_fat\_index}}
\index{get\_first\_empty\_fat\_index@{get\_first\_empty\_fat\_index}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{get\_first\_empty\_fat\_index()}{get\_first\_empty\_fat\_index()}}
{\footnotesize\ttfamily int get\+\_\+first\+\_\+empty\+\_\+fat\+\_\+index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\Hypertarget{pennfat__kernel_8h_a9ecd38dc6f3a9721ab53ff9a815b5480}\label{pennfat__kernel_8h_a9ecd38dc6f3a9721ab53ff9a815b5480} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!k\_close@{k\_close}}
\index{k\_close@{k\_close}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_close()}{k\_close()}}
{\footnotesize\ttfamily int k\+\_\+close (\begin{DoxyParamCaption}\item[{int}]{fd }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em fd} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\Hypertarget{pennfat__kernel_8h_a9317fe11a36bfc2d731bcbacc3a57728}\label{pennfat__kernel_8h_a9317fe11a36bfc2d731bcbacc3a57728} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!k\_ls@{k\_ls}}
\index{k\_ls@{k\_ls}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_ls()}{k\_ls()}}
{\footnotesize\ttfamily void k\+\_\+ls (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{filename }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em filename} & \\
\hline
\end{DoxyParams}
\Hypertarget{pennfat__kernel_8h_a332b4729ef52b2a3132b1aea88fa5c96}\label{pennfat__kernel_8h_a332b4729ef52b2a3132b1aea88fa5c96} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!k\_lseek@{k\_lseek}}
\index{k\_lseek@{k\_lseek}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_lseek()}{k\_lseek()}}
{\footnotesize\ttfamily off\+\_\+t k\+\_\+lseek (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{int}]{offset,  }\item[{int}]{whence }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em fd} & \\
\hline
{\em offset} & \\
\hline
{\em whence} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
off\+\_\+t 
\end{DoxyReturn}
\Hypertarget{pennfat__kernel_8h_a4d2cf4232cddee738996ca9ad83ea56f}\label{pennfat__kernel_8h_a4d2cf4232cddee738996ca9ad83ea56f} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!k\_open@{k\_open}}
\index{k\_open@{k\_open}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_open()}{k\_open()}}
{\footnotesize\ttfamily int k\+\_\+open (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{fname,  }\item[{int}]{mode }\end{DoxyParamCaption})}



Open file name {\ttfamily fname} with the mode {\ttfamily mode}, and return a file descriptor to that file. 

This function opens a file specified by the file name {\ttfamily fname} in the mode specified by {\ttfamily mode} and returns a file descriptor associated with the open file that can be used for subsequent file operations.


\begin{DoxyParams}{Parameters}
{\em fname} & The name of the file to open. See POSIX standard for allowed names. \\
\hline
{\em mode} & The mode with which to open the file. This should specify the access mode (e.\+g., read, write) and other flags as defined by the operating system. Allowed modes are\+: write ({\ttfamily F\+\_\+\+WRITE}), read ({\ttfamily F\+\_\+\+READ}), and append ({\ttfamily F\+\_\+\+APPEND}).\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int A non-\/negative file descriptor on success, or -\/1 on error and {\ttfamily errno} set.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
The {\ttfamily mode} parameter may only be {\ttfamily F\+\_\+\+WRITE}, {\ttfamily F\+\_\+\+READ}, or {\ttfamily F\+\_\+\+APPEND}. Note that despite their names, write and append support both reading and writing. {\ttfamily F\+\_\+\+APPEND}\textquotesingle{}s file pointer will point to the end of the file rather than the beginning. Both {\ttfamily F\+\_\+\+WRITE} and {\ttfamily F\+\_\+\+APPEND} will create the named file if it does not already exist.
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\href{https://www.ibm.com/docs/en/zos/3.1.0?topic=locales-posix-portable-file-name-character-set}{\texttt{ https\+://www.\+ibm.\+com/docs/en/zos/3.\+1.\+0?topic=locales-\/posix-\/portable-\/file-\/name-\/character-\/set}}
\end{DoxySeeAlso}
Possible values of {\ttfamily errno} are\+:
\begin{DoxyItemize}
\item {\ttfamily EACCES} \+: // need to fill these in, will expand as further progress
\item {\ttfamily ENAMETOOLONG} \+: 
\end{DoxyItemize}\Hypertarget{pennfat__kernel_8h_a1951ec11865274b45144d6dd6f878692}\label{pennfat__kernel_8h_a1951ec11865274b45144d6dd6f878692} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!k\_read@{k\_read}}
\index{k\_read@{k\_read}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_read()}{k\_read()}}
{\footnotesize\ttfamily ssize\+\_\+t k\+\_\+read (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{int}]{n,  }\item[{char \texorpdfstring{$\ast$}{*}}]{buf }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em fd} & A \\
\hline
{\em n} & \\
\hline
{\em buf} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
ssize\+\_\+t 
\end{DoxyReturn}
\Hypertarget{pennfat__kernel_8h_ae8b44b3621ebb542bec49f73d19d2885}\label{pennfat__kernel_8h_ae8b44b3621ebb542bec49f73d19d2885} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!k\_unlink@{k\_unlink}}
\index{k\_unlink@{k\_unlink}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_unlink()}{k\_unlink()}}
{\footnotesize\ttfamily int k\+\_\+unlink (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{fname }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em fname} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\Hypertarget{pennfat__kernel_8h_a79d2a9b65d0e04de358fe1a2cfa79baf}\label{pennfat__kernel_8h_a79d2a9b65d0e04de358fe1a2cfa79baf} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!k\_write@{k\_write}}
\index{k\_write@{k\_write}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_write()}{k\_write()}}
{\footnotesize\ttfamily ssize\+\_\+t k\+\_\+write (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{str,  }\item[{int}]{n }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em fd} & \\
\hline
{\em str} & \\
\hline
{\em n} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
ssize\+\_\+t 
\end{DoxyReturn}
\Hypertarget{pennfat__kernel_8h_a2d501c304eeba5035c83c1e2a4aec4fb}\label{pennfat__kernel_8h_a2d501c304eeba5035c83c1e2a4aec4fb} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!lseek\_to\_root\_directory@{lseek\_to\_root\_directory}}
\index{lseek\_to\_root\_directory@{lseek\_to\_root\_directory}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{lseek\_to\_root\_directory()}{lseek\_to\_root\_directory()}}
{\footnotesize\ttfamily void lseek\+\_\+to\+\_\+root\+\_\+directory (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\doxysubsection{Variable Documentation}
\Hypertarget{pennfat__kernel_8h_a70b27761c7d0bd5cd90f4fe47e569b94}\label{pennfat__kernel_8h_a70b27761c7d0bd5cd90f4fe47e569b94} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!block\_size@{block\_size}}
\index{block\_size@{block\_size}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{block\_size}{block\_size}}
{\footnotesize\ttfamily int block\+\_\+size\hspace{0.3cm}{\ttfamily [extern]}}

\Hypertarget{pennfat__kernel_8h_af69e180c878a9c8f4e45ec7dc25a062f}\label{pennfat__kernel_8h_af69e180c878a9c8f4e45ec7dc25a062f} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!data\_size@{data\_size}}
\index{data\_size@{data\_size}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{data\_size}{data\_size}}
{\footnotesize\ttfamily int data\+\_\+size\hspace{0.3cm}{\ttfamily [extern]}}

\Hypertarget{pennfat__kernel_8h_a0e52a1a113ded7f4787290edc22ad954}\label{pennfat__kernel_8h_a0e52a1a113ded7f4787290edc22ad954} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!fat@{fat}}
\index{fat@{fat}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{fat}{fat}}
{\footnotesize\ttfamily uint16\+\_\+t\texorpdfstring{$\ast$}{*} fat\hspace{0.3cm}{\ttfamily [extern]}}

\Hypertarget{pennfat__kernel_8h_a6a5f2839b4852a1e8b5c0b10ec6caa5b}\label{pennfat__kernel_8h_a6a5f2839b4852a1e8b5c0b10ec6caa5b} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!fat\_size@{fat\_size}}
\index{fat\_size@{fat\_size}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{fat\_size}{fat\_size}}
{\footnotesize\ttfamily int fat\+\_\+size\hspace{0.3cm}{\ttfamily [extern]}}

\Hypertarget{pennfat__kernel_8h_a64b57b29bcc87a7b1967c7d55e7d4212}\label{pennfat__kernel_8h_a64b57b29bcc87a7b1967c7d55e7d4212} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!fs\_fd@{fs\_fd}}
\index{fs\_fd@{fs\_fd}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{fs\_fd}{fs\_fd}}
{\footnotesize\ttfamily int fs\+\_\+fd\hspace{0.3cm}{\ttfamily [extern]}}

\Hypertarget{pennfat__kernel_8h_aaa044c9a05adf7c4c653586036be5bd7}\label{pennfat__kernel_8h_aaa044c9a05adf7c4c653586036be5bd7} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!global\_fd\_table@{global\_fd\_table}}
\index{global\_fd\_table@{global\_fd\_table}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{global\_fd\_table}{global\_fd\_table}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structfile__descriptor__st}{file\+\_\+descriptor\+\_\+st}}\texorpdfstring{$\ast$}{*} global\+\_\+fd\+\_\+table\hspace{0.3cm}{\ttfamily [extern]}}

\Hypertarget{pennfat__kernel_8h_af866bcf6c2272c2f6b1b7e5ad3a2e127}\label{pennfat__kernel_8h_af866bcf6c2272c2f6b1b7e5ad3a2e127} 
\index{pennfat\_kernel.h@{pennfat\_kernel.h}!num\_fat\_entries@{num\_fat\_entries}}
\index{num\_fat\_entries@{num\_fat\_entries}!pennfat\_kernel.h@{pennfat\_kernel.h}}
\doxysubsubsection{\texorpdfstring{num\_fat\_entries}{num\_fat\_entries}}
{\footnotesize\ttfamily int num\+\_\+fat\+\_\+entries\hspace{0.3cm}{\ttfamily [extern]}}

