\doxysection{src/util/kernel.h File Reference}
\hypertarget{kernel_8h}{}\label{kernel_8h}\index{src/util/kernel.h@{src/util/kernel.h}}
{\ttfamily \#include "{}spthread.\+h"{}}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}}
\begin{DoxyCompactList}\small\item\em This structure stores all required information about a running process. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct pcb\+\_\+t \mbox{\hyperlink{kernel_8h_a71acfdbc74942780681d06efcc05a0a5}{pcb\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854}{process\+\_\+state\+\_\+t}} \{ \mbox{\hyperlink{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854a1061be6c3fb88d32829cba6f6b2be304}{RUNNING}}
, \mbox{\hyperlink{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854a948b2aee15f52b421fa4770c47bcfe8c}{STOPPED}}
, \mbox{\hyperlink{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854a376c1b6a3f75d283a2efacf737438d61}{BLOCKED}}
, \mbox{\hyperlink{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854acfa05d5a2f18cf6a5976178d9949c512}{ZOMBIED}}
 \}
\begin{DoxyCompactList}\small\item\em Defines the possible states of a process in the system. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{kernel_8h_a736760f5a73bbd7d6c9e4607c49837a3}{k\+\_\+proc\+\_\+create}} (\mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}} \texorpdfstring{$\ast$}{*}parent)
\begin{DoxyCompactList}\small\item\em Create a new child process, inheriting applicable properties from the parent. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{kernel_8h_a87071d3f59ebc0d6f626c885eb27c27e}{k\+\_\+proc\+\_\+cleanup}} (\mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}} \texorpdfstring{$\ast$}{*}proc)
\begin{DoxyCompactList}\small\item\em Clean up a terminated/finished thread\textquotesingle{}s resources. This may include freeing the PCB, handling children, etc. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{kernel_8h_a4d2cf4232cddee738996ca9ad83ea56f}{k\+\_\+open}} (const char \texorpdfstring{$\ast$}{*}fname, int mode)
\begin{DoxyCompactList}\small\item\em Open file name {\ttfamily fname} with the mode {\ttfamily mode}, and return a file descriptor to that file. \end{DoxyCompactList}\item 
ssize\+\_\+t \mbox{\hyperlink{kernel_8h_a1951ec11865274b45144d6dd6f878692}{k\+\_\+read}} (int fd, int n, char \texorpdfstring{$\ast$}{*}buf)
\item 
ssize\+\_\+t \mbox{\hyperlink{kernel_8h_a79d2a9b65d0e04de358fe1a2cfa79baf}{k\+\_\+write}} (int fd, const char \texorpdfstring{$\ast$}{*}str, int n)
\item 
int \mbox{\hyperlink{kernel_8h_a9ecd38dc6f3a9721ab53ff9a815b5480}{k\+\_\+close}} (int fd)
\item 
int \mbox{\hyperlink{kernel_8h_ae8b44b3621ebb542bec49f73d19d2885}{k\+\_\+unlink}} (const char \texorpdfstring{$\ast$}{*}fname)
\item 
off\+\_\+t \mbox{\hyperlink{kernel_8h_a332b4729ef52b2a3132b1aea88fa5c96}{k\+\_\+lseek}} (int fd, int offset, int whence)
\item 
void \mbox{\hyperlink{kernel_8h_a9317fe11a36bfc2d731bcbacc3a57728}{k\+\_\+ls}} (const char \texorpdfstring{$\ast$}{*}filename)
\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\Hypertarget{kernel_8h_a71acfdbc74942780681d06efcc05a0a5}\label{kernel_8h_a71acfdbc74942780681d06efcc05a0a5} 
\index{kernel.h@{kernel.h}!pcb\_t@{pcb\_t}}
\index{pcb\_t@{pcb\_t}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{pcb\_t}{pcb\_t}}
{\footnotesize\ttfamily typedef struct pcb\+\_\+t pcb\+\_\+t}



\doxysubsection{Enumeration Type Documentation}
\Hypertarget{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854}\label{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854} 
\index{kernel.h@{kernel.h}!process\_state\_t@{process\_state\_t}}
\index{process\_state\_t@{process\_state\_t}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{process\_state\_t}{process\_state\_t}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854}{process\+\_\+state\+\_\+t}}}



Defines the possible states of a process in the system. 

This enumeration lists all the possible states that a process could be in at any given time. It is used within the \doxylink{structpcb__t}{pcb\+\_\+t} structure to track the current state of each process. \begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{RUNNING@{RUNNING}!kernel.h@{kernel.h}}\index{kernel.h@{kernel.h}!RUNNING@{RUNNING}}}\Hypertarget{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854a1061be6c3fb88d32829cba6f6b2be304}\label{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854a1061be6c3fb88d32829cba6f6b2be304} 
RUNNING&Process is currently executing. A process enters the RUNNING state when the scheduler selects it for execution, typically from the READY state. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{STOPPED@{STOPPED}!kernel.h@{kernel.h}}\index{kernel.h@{kernel.h}!STOPPED@{STOPPED}}}\Hypertarget{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854a948b2aee15f52b421fa4770c47bcfe8c}\label{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854a948b2aee15f52b421fa4770c47bcfe8c} 
STOPPED&Process is not executing, but can be resumed. A process should only become STOPPED if signaled by s\+\_\+kill, recieving the P\+\_\+\+SIGSTOP signal. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{BLOCKED@{BLOCKED}!kernel.h@{kernel.h}}\index{kernel.h@{kernel.h}!BLOCKED@{BLOCKED}}}\Hypertarget{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854a376c1b6a3f75d283a2efacf737438d61}\label{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854a376c1b6a3f75d283a2efacf737438d61} 
BLOCKED&Process is not executing, waiting for an event to occur. A process should only be blocked if it made a call to either s\+\_\+waitpid or s\+\_\+sleep. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{ZOMBIED@{ZOMBIED}!kernel.h@{kernel.h}}\index{kernel.h@{kernel.h}!ZOMBIED@{ZOMBIED}}}\Hypertarget{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854acfa05d5a2f18cf6a5976178d9949c512}\label{kernel_8h_ab97efa0d1c4aeaf55ff756bf16685854acfa05d5a2f18cf6a5976178d9949c512} 
ZOMBIED&Process has finished execution but awaits resource cleanup. A process enters the ZOMBIED state after it has finished its execution and is waiting for the parent process to read its exit status. If the parent process ever exits prior to reading exit status, this process should immediately cleaned up. ~\newline
 \\
\hline

\end{DoxyEnumFields}


\doxysubsection{Function Documentation}
\Hypertarget{kernel_8h_a9ecd38dc6f3a9721ab53ff9a815b5480}\label{kernel_8h_a9ecd38dc6f3a9721ab53ff9a815b5480} 
\index{kernel.h@{kernel.h}!k\_close@{k\_close}}
\index{k\_close@{k\_close}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_close()}{k\_close()}}
{\footnotesize\ttfamily int k\+\_\+close (\begin{DoxyParamCaption}\item[{int}]{fd }\end{DoxyParamCaption})}

\Hypertarget{kernel_8h_a9317fe11a36bfc2d731bcbacc3a57728}\label{kernel_8h_a9317fe11a36bfc2d731bcbacc3a57728} 
\index{kernel.h@{kernel.h}!k\_ls@{k\_ls}}
\index{k\_ls@{k\_ls}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_ls()}{k\_ls()}}
{\footnotesize\ttfamily void k\+\_\+ls (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{filename }\end{DoxyParamCaption})}

\Hypertarget{kernel_8h_a332b4729ef52b2a3132b1aea88fa5c96}\label{kernel_8h_a332b4729ef52b2a3132b1aea88fa5c96} 
\index{kernel.h@{kernel.h}!k\_lseek@{k\_lseek}}
\index{k\_lseek@{k\_lseek}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_lseek()}{k\_lseek()}}
{\footnotesize\ttfamily off\+\_\+t k\+\_\+lseek (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{int}]{offset,  }\item[{int}]{whence }\end{DoxyParamCaption})}

\Hypertarget{kernel_8h_a4d2cf4232cddee738996ca9ad83ea56f}\label{kernel_8h_a4d2cf4232cddee738996ca9ad83ea56f} 
\index{kernel.h@{kernel.h}!k\_open@{k\_open}}
\index{k\_open@{k\_open}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_open()}{k\_open()}}
{\footnotesize\ttfamily int k\+\_\+open (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{fname,  }\item[{int}]{mode }\end{DoxyParamCaption})}



Open file name {\ttfamily fname} with the mode {\ttfamily mode}, and return a file descriptor to that file. 

This function opens a file specified by the file name {\ttfamily fname} in the mode specified by {\ttfamily mode} and returns a file descriptor associated with the open file that can be used for subsequent file operations.


\begin{DoxyParams}{Parameters}
{\em fname} & The name of the file to open. See POSIX standard for allowed names. \\
\hline
{\em mode} & The mode with which to open the file. This should specify the access mode (e.\+g., read, write) and other flags as defined by the operating system. Allowed modes are\+: write ({\ttfamily F\+\_\+\+WRITE}), read ({\ttfamily F\+\_\+\+READ}), and append ({\ttfamily F\+\_\+\+APPEND}).\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int A non-\/negative file descriptor on success, or -\/1 on error and {\ttfamily errno} set.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
The {\ttfamily mode} parameter may only be {\ttfamily F\+\_\+\+WRITE}, {\ttfamily F\+\_\+\+READ}, or {\ttfamily F\+\_\+\+APPEND}. Note that despite their names, write and append support both reading and writing. {\ttfamily F\+\_\+\+APPEND}\textquotesingle{}s file pointer will point to the end of the file rather than the beginning. Both {\ttfamily F\+\_\+\+WRITE} and {\ttfamily F\+\_\+\+APPEND} will create the named file if it does not already exist.
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\href{https://www.ibm.com/docs/en/zos/3.1.0?topic=locales-posix-portable-file-name-character-set}{\texttt{ https\+://www.\+ibm.\+com/docs/en/zos/3.\+1.\+0?topic=locales-\/posix-\/portable-\/file-\/name-\/character-\/set}}
\end{DoxySeeAlso}
Possible values of {\ttfamily errno} are\+:
\begin{DoxyItemize}
\item {\ttfamily EACCES} \+: // need to fill these in, will expand as further progress
\item {\ttfamily ENAMETOOLONG} \+: 
\end{DoxyItemize}\Hypertarget{kernel_8h_a87071d3f59ebc0d6f626c885eb27c27e}\label{kernel_8h_a87071d3f59ebc0d6f626c885eb27c27e} 
\index{kernel.h@{kernel.h}!k\_proc\_cleanup@{k\_proc\_cleanup}}
\index{k\_proc\_cleanup@{k\_proc\_cleanup}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_proc\_cleanup()}{k\_proc\_cleanup()}}
{\footnotesize\ttfamily void k\+\_\+proc\+\_\+cleanup (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{proc }\end{DoxyParamCaption})}



Clean up a terminated/finished thread\textquotesingle{}s resources. This may include freeing the PCB, handling children, etc. 


\begin{DoxyParams}{Parameters}
{\em proc} & This is a pointer to the process control block of a process that has terminated. \\
\hline
\end{DoxyParams}
\Hypertarget{kernel_8h_a736760f5a73bbd7d6c9e4607c49837a3}\label{kernel_8h_a736760f5a73bbd7d6c9e4607c49837a3} 
\index{kernel.h@{kernel.h}!k\_proc\_create@{k\_proc\_create}}
\index{k\_proc\_create@{k\_proc\_create}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_proc\_create()}{k\_proc\_create()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}} \texorpdfstring{$\ast$}{*} k\+\_\+proc\+\_\+create (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{parent }\end{DoxyParamCaption})}



Create a new child process, inheriting applicable properties from the parent. 


\begin{DoxyParams}{Parameters}
{\em parent} & This is a pointer to the process control block of the parent, from which it inherits. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Reference to the child PCB. 
\end{DoxyReturn}
\Hypertarget{kernel_8h_a1951ec11865274b45144d6dd6f878692}\label{kernel_8h_a1951ec11865274b45144d6dd6f878692} 
\index{kernel.h@{kernel.h}!k\_read@{k\_read}}
\index{k\_read@{k\_read}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_read()}{k\_read()}}
{\footnotesize\ttfamily ssize\+\_\+t k\+\_\+read (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{int}]{n,  }\item[{char \texorpdfstring{$\ast$}{*}}]{buf }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em fd} & \\
\hline
{\em n} & \\
\hline
{\em buf} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
ssize\+\_\+t 
\end{DoxyReturn}
\Hypertarget{kernel_8h_ae8b44b3621ebb542bec49f73d19d2885}\label{kernel_8h_ae8b44b3621ebb542bec49f73d19d2885} 
\index{kernel.h@{kernel.h}!k\_unlink@{k\_unlink}}
\index{k\_unlink@{k\_unlink}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_unlink()}{k\_unlink()}}
{\footnotesize\ttfamily int k\+\_\+unlink (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{fname }\end{DoxyParamCaption})}

\Hypertarget{kernel_8h_a79d2a9b65d0e04de358fe1a2cfa79baf}\label{kernel_8h_a79d2a9b65d0e04de358fe1a2cfa79baf} 
\index{kernel.h@{kernel.h}!k\_write@{k\_write}}
\index{k\_write@{k\_write}!kernel.h@{kernel.h}}
\doxysubsubsection{\texorpdfstring{k\_write()}{k\_write()}}
{\footnotesize\ttfamily ssize\+\_\+t k\+\_\+write (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{str,  }\item[{int}]{n }\end{DoxyParamCaption})}

