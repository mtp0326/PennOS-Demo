\doxysection{src/util/sys\+\_\+call.c File Reference}
\hypertarget{sys__call_8c}{}\label{sys__call_8c}\index{src/util/sys\_call.c@{src/util/sys\_call.c}}
{\ttfamily \#include "{}sys\+\_\+call.\+h"{}}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include "{}stdio.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{sys__call_8c_a628a3b2c1d461572974e97bea327519d}{duplicate\+\_\+argv}} (char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]})
\item 
void \mbox{\hyperlink{sys__call_8c_a33d16eae921a526aeb277c961c6933fc}{free\+\_\+argv}} (char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]})
\item 
pid\+\_\+t \mbox{\hyperlink{sys__call_8c_a43b789c710ba1501bcd8cf54e4382e50}{s\+\_\+spawn}} (void \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*}func)(void \texorpdfstring{$\ast$}{*}), char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]}, int fd0, int fd1)
\begin{DoxyCompactList}\small\item\em Create a child process that executes the function {\ttfamily func}. The child will retain some attributes of the parent. \end{DoxyCompactList}\item 
pid\+\_\+t \mbox{\hyperlink{sys__call_8c_a62b97025761b7f8ad7e59b641cad08d6}{s\+\_\+spawn\+\_\+nice}} (void \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*}func)(void \texorpdfstring{$\ast$}{*}), char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]}, int fd0, int fd1, unsigned int \mbox{\hyperlink{pennos_8c_a2e0cca4a43c21259b881d59c96c74fe0}{priority}})
\item 
pid\+\_\+t \mbox{\hyperlink{sys__call_8c_a3c0c6c4ae69799354d707ff57ac925d3}{s\+\_\+waitpid}} (pid\+\_\+t pid, int \texorpdfstring{$\ast$}{*}wstatus, bool nohang)
\begin{DoxyCompactList}\small\item\em Wait on a child of the calling process, until it changes state. If {\ttfamily nohang} is true, this will not block the calling process and return immediately. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sys__call_8c_a18e6794b108eea25459bd7fe31de4e76}{s\+\_\+kill}} (pid\+\_\+t pid, int signal)
\begin{DoxyCompactList}\small\item\em Send a signal to a particular process. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sys__call_8c_a53c8865d5bf1ca946e5b5405190f6690}{s\+\_\+exit}} (void)
\begin{DoxyCompactList}\small\item\em Unconditionally exit the calling process. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sys__call_8c_ac711d33fcf2573a590b224b6debab996}{s\+\_\+nice}} (pid\+\_\+t pid, int \mbox{\hyperlink{pennos_8c_a2e0cca4a43c21259b881d59c96c74fe0}{priority}})
\begin{DoxyCompactList}\small\item\em Set the priority of the specified thread. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sys__call_8c_aec37528a3c7935864924764d1911126c}{s\+\_\+sleep}} (unsigned int ticks)
\begin{DoxyCompactList}\small\item\em Suspends execution of the calling proces for a specified number of clock ticks. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sys__call_8c_a9116ac84aeec3a4717eab9aa7137080e}{s\+\_\+spawn\+\_\+and\+\_\+wait}} (void \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*}func)(void \texorpdfstring{$\ast$}{*}), char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]}, int fd0, int fd1, bool nohang, unsigned int \mbox{\hyperlink{pennos_8c_a2e0cca4a43c21259b881d59c96c74fe0}{priority}})
\begin{DoxyCompactList}\small\item\em Spawns and waits for a process. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{sys__call_8c_a35ff16131dec7dc8b25686329a19d0db}{s\+\_\+find\+\_\+process}} (pid\+\_\+t pid)
\begin{DoxyCompactList}\small\item\em Finds a process in any state. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sys__call_8c_a09ef4dc77a6071976f7d93759d48afa6}{s\+\_\+remove\+\_\+process}} (pid\+\_\+t pid)
\begin{DoxyCompactList}\small\item\em Removes a process in any state. \end{DoxyCompactList}\item 
void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{sys__call_8c_ab5efee98239591e685e3ae7da8203b21}{s\+\_\+function\+\_\+from\+\_\+string}} (char \texorpdfstring{$\ast$}{*}program)
\item 
int \mbox{\hyperlink{sys__call_8c_a1db57eb907f680ab844066357b793d5f}{s\+\_\+write\+\_\+log}} (\mbox{\hyperlink{sys__call_8h_a9df1ce5034a7614c2c55bc05500f5991}{log\+\_\+message\+\_\+t}} logtype, \mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}} \texorpdfstring{$\ast$}{*}proc, unsigned int old\+\_\+nice)
\item 
int \mbox{\hyperlink{sys__call_8c_a7cc95330d937650d14281e3d6041f284}{s\+\_\+move\+\_\+process}} (\mbox{\hyperlink{structCircularList}{Circular\+List}} \texorpdfstring{$\ast$}{*}destination, pid\+\_\+t pid)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{sys__call_8c_a628a3b2c1d461572974e97bea327519d}\label{sys__call_8c_a628a3b2c1d461572974e97bea327519d} 
\index{sys\_call.c@{sys\_call.c}!duplicate\_argv@{duplicate\_argv}}
\index{duplicate\_argv@{duplicate\_argv}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{duplicate\_argv()}{duplicate\_argv()}}
{\footnotesize\ttfamily char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} duplicate\+\_\+argv (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}

\Hypertarget{sys__call_8c_a33d16eae921a526aeb277c961c6933fc}\label{sys__call_8c_a33d16eae921a526aeb277c961c6933fc} 
\index{sys\_call.c@{sys\_call.c}!free\_argv@{free\_argv}}
\index{free\_argv@{free\_argv}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{free\_argv()}{free\_argv()}}
{\footnotesize\ttfamily void free\+\_\+argv (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}

\Hypertarget{sys__call_8c_a53c8865d5bf1ca946e5b5405190f6690}\label{sys__call_8c_a53c8865d5bf1ca946e5b5405190f6690} 
\index{sys\_call.c@{sys\_call.c}!s\_exit@{s\_exit}}
\index{s\_exit@{s\_exit}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_exit()}{s\_exit()}}
{\footnotesize\ttfamily void s\+\_\+exit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Unconditionally exit the calling process. 

\Hypertarget{sys__call_8c_a35ff16131dec7dc8b25686329a19d0db}\label{sys__call_8c_a35ff16131dec7dc8b25686329a19d0db} 
\index{sys\_call.c@{sys\_call.c}!s\_find\_process@{s\_find\_process}}
\index{s\_find\_process@{s\_find\_process}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_find\_process()}{s\_find\_process()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}} \texorpdfstring{$\ast$}{*} s\+\_\+find\+\_\+process (\begin{DoxyParamCaption}\item[{pid\+\_\+t}]{pid }\end{DoxyParamCaption})}



Finds a process in any state. 


\begin{DoxyParams}{Parameters}
{\em pid} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pcb\+\_\+t\texorpdfstring{$\ast$}{*} 
\end{DoxyReturn}
\Hypertarget{sys__call_8c_ab5efee98239591e685e3ae7da8203b21}\label{sys__call_8c_ab5efee98239591e685e3ae7da8203b21} 
\index{sys\_call.c@{sys\_call.c}!s\_function\_from\_string@{s\_function\_from\_string}}
\index{s\_function\_from\_string@{s\_function\_from\_string}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_function\_from\_string()}{s\_function\_from\_string()}}
{\footnotesize\ttfamily void \texorpdfstring{$\ast$}{*} s\+\_\+function\+\_\+from\+\_\+string (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}}]{program }\end{DoxyParamCaption})}

\Hypertarget{sys__call_8c_a18e6794b108eea25459bd7fe31de4e76}\label{sys__call_8c_a18e6794b108eea25459bd7fe31de4e76} 
\index{sys\_call.c@{sys\_call.c}!s\_kill@{s\_kill}}
\index{s\_kill@{s\_kill}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_kill()}{s\_kill()}}
{\footnotesize\ttfamily int s\+\_\+kill (\begin{DoxyParamCaption}\item[{pid\+\_\+t}]{pid,  }\item[{int}]{signal }\end{DoxyParamCaption})}



Send a signal to a particular process. 


\begin{DoxyParams}{Parameters}
{\em pid} & Process ID of the target proces. \\
\hline
{\em signal} & Signal number to be sent. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 on error. 
\end{DoxyReturn}
\Hypertarget{sys__call_8c_a7cc95330d937650d14281e3d6041f284}\label{sys__call_8c_a7cc95330d937650d14281e3d6041f284} 
\index{sys\_call.c@{sys\_call.c}!s\_move\_process@{s\_move\_process}}
\index{s\_move\_process@{s\_move\_process}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_move\_process()}{s\_move\_process()}}
{\footnotesize\ttfamily int s\+\_\+move\+\_\+process (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structCircularList}{Circular\+List}} \texorpdfstring{$\ast$}{*}}]{destination,  }\item[{pid\+\_\+t}]{pid }\end{DoxyParamCaption})}

\Hypertarget{sys__call_8c_ac711d33fcf2573a590b224b6debab996}\label{sys__call_8c_ac711d33fcf2573a590b224b6debab996} 
\index{sys\_call.c@{sys\_call.c}!s\_nice@{s\_nice}}
\index{s\_nice@{s\_nice}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_nice()}{s\_nice()}}
{\footnotesize\ttfamily int s\+\_\+nice (\begin{DoxyParamCaption}\item[{pid\+\_\+t}]{pid,  }\item[{int}]{priority }\end{DoxyParamCaption})}



Set the priority of the specified thread. 


\begin{DoxyParams}{Parameters}
{\em pid} & Process ID of the target thread. \\
\hline
{\em priority} & The new priorty value of the thread (0, 1, or 2) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 on failure. 
\end{DoxyReturn}
\Hypertarget{sys__call_8c_a09ef4dc77a6071976f7d93759d48afa6}\label{sys__call_8c_a09ef4dc77a6071976f7d93759d48afa6} 
\index{sys\_call.c@{sys\_call.c}!s\_remove\_process@{s\_remove\_process}}
\index{s\_remove\_process@{s\_remove\_process}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_remove\_process()}{s\_remove\_process()}}
{\footnotesize\ttfamily int s\+\_\+remove\+\_\+process (\begin{DoxyParamCaption}\item[{pid\+\_\+t}]{pid }\end{DoxyParamCaption})}



Removes a process in any state. 


\begin{DoxyParams}{Parameters}
{\em pid} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\Hypertarget{sys__call_8c_aec37528a3c7935864924764d1911126c}\label{sys__call_8c_aec37528a3c7935864924764d1911126c} 
\index{sys\_call.c@{sys\_call.c}!s\_sleep@{s\_sleep}}
\index{s\_sleep@{s\_sleep}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_sleep()}{s\_sleep()}}
{\footnotesize\ttfamily void s\+\_\+sleep (\begin{DoxyParamCaption}\item[{unsigned int}]{ticks }\end{DoxyParamCaption})}



Suspends execution of the calling proces for a specified number of clock ticks. 

This function is analogous to {\ttfamily sleep(3)} in Linux, with the behavior that the system clock continues to tick even if the call is interrupted. The sleep can be interrupted by a P\+\_\+\+SIGTERM signal, after which the function will return prematurely.


\begin{DoxyParams}{Parameters}
{\em ticks} & Duration of the sleep in system clock ticks. Must be greater than 0. \\
\hline
\end{DoxyParams}
\Hypertarget{sys__call_8c_a43b789c710ba1501bcd8cf54e4382e50}\label{sys__call_8c_a43b789c710ba1501bcd8cf54e4382e50} 
\index{sys\_call.c@{sys\_call.c}!s\_spawn@{s\_spawn}}
\index{s\_spawn@{s\_spawn}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_spawn()}{s\_spawn()}}
{\footnotesize\ttfamily pid\+\_\+t s\+\_\+spawn (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*})(void \texorpdfstring{$\ast$}{*})}]{func,  }\item[{char \texorpdfstring{$\ast$}{*}}]{argv\mbox{[}$\,$\mbox{]},  }\item[{int}]{fd0,  }\item[{int}]{fd1 }\end{DoxyParamCaption})}



Create a child process that executes the function {\ttfamily func}. The child will retain some attributes of the parent. 


\begin{DoxyParams}{Parameters}
{\em func} & Function to be executed by the child process. \\
\hline
{\em argv} & Null-\/terminated array of args, including the command name as argv\mbox{[}0\mbox{]}. \\
\hline
{\em fd0} & Input file descriptor. \\
\hline
{\em fd1} & Output file descriptor. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pid\+\_\+t The process ID of the created child process. // need to define error output? 
\end{DoxyReturn}
\Hypertarget{sys__call_8c_a9116ac84aeec3a4717eab9aa7137080e}\label{sys__call_8c_a9116ac84aeec3a4717eab9aa7137080e} 
\index{sys\_call.c@{sys\_call.c}!s\_spawn\_and\_wait@{s\_spawn\_and\_wait}}
\index{s\_spawn\_and\_wait@{s\_spawn\_and\_wait}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_spawn\_and\_wait()}{s\_spawn\_and\_wait()}}
{\footnotesize\ttfamily int s\+\_\+spawn\+\_\+and\+\_\+wait (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*})(void \texorpdfstring{$\ast$}{*})}]{func,  }\item[{char \texorpdfstring{$\ast$}{*}}]{argv\mbox{[}$\,$\mbox{]},  }\item[{int}]{fd0,  }\item[{int}]{fd1,  }\item[{bool}]{nohang,  }\item[{unsigned int}]{priority }\end{DoxyParamCaption})}



Spawns and waits for a process. 


\begin{DoxyParams}{Parameters}
{\em func} & \\
\hline
{\em argv} & \\
\hline
{\em fd0} & \\
\hline
{\em fd1} & \\
\hline
{\em nohang} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\Hypertarget{sys__call_8c_a62b97025761b7f8ad7e59b641cad08d6}\label{sys__call_8c_a62b97025761b7f8ad7e59b641cad08d6} 
\index{sys\_call.c@{sys\_call.c}!s\_spawn\_nice@{s\_spawn\_nice}}
\index{s\_spawn\_nice@{s\_spawn\_nice}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_spawn\_nice()}{s\_spawn\_nice()}}
{\footnotesize\ttfamily pid\+\_\+t s\+\_\+spawn\+\_\+nice (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*})(void \texorpdfstring{$\ast$}{*})}]{func,  }\item[{char \texorpdfstring{$\ast$}{*}}]{argv\mbox{[}$\,$\mbox{]},  }\item[{int}]{fd0,  }\item[{int}]{fd1,  }\item[{unsigned int}]{priority }\end{DoxyParamCaption})}

\Hypertarget{sys__call_8c_a3c0c6c4ae69799354d707ff57ac925d3}\label{sys__call_8c_a3c0c6c4ae69799354d707ff57ac925d3} 
\index{sys\_call.c@{sys\_call.c}!s\_waitpid@{s\_waitpid}}
\index{s\_waitpid@{s\_waitpid}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_waitpid()}{s\_waitpid()}}
{\footnotesize\ttfamily pid\+\_\+t s\+\_\+waitpid (\begin{DoxyParamCaption}\item[{pid\+\_\+t}]{pid,  }\item[{int \texorpdfstring{$\ast$}{*}}]{wstatus,  }\item[{bool}]{nohang }\end{DoxyParamCaption})}



Wait on a child of the calling process, until it changes state. If {\ttfamily nohang} is true, this will not block the calling process and return immediately. 


\begin{DoxyParams}{Parameters}
{\em pid} & Process ID of the child to wait for. \\
\hline
{\em wstatus} & Pointer to an integer variable where the status will be stored. \\
\hline
{\em nohang} & If true, return immediately if no child has exited. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pid\+\_\+t The process ID of the child which has changed state on success, -\/1 on error. 
\end{DoxyReturn}
\Hypertarget{sys__call_8c_a1db57eb907f680ab844066357b793d5f}\label{sys__call_8c_a1db57eb907f680ab844066357b793d5f} 
\index{sys\_call.c@{sys\_call.c}!s\_write\_log@{s\_write\_log}}
\index{s\_write\_log@{s\_write\_log}!sys\_call.c@{sys\_call.c}}
\doxysubsubsection{\texorpdfstring{s\_write\_log()}{s\_write\_log()}}
{\footnotesize\ttfamily int s\+\_\+write\+\_\+log (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{sys__call_8h_a9df1ce5034a7614c2c55bc05500f5991}{log\+\_\+message\+\_\+t}}}]{logtype,  }\item[{\mbox{\hyperlink{structpcb__t}{pcb\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{proc,  }\item[{unsigned int}]{old\+\_\+nice }\end{DoxyParamCaption})}

