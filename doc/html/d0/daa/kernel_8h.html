<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PennOS: src/util/kernel.h File Reference</title>
<link rel="icon" href="../../icons8-document-50.png" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">PennOS<span id="projectnumber">&#160;2.0</span>
   </div>
   <div id="projectbrief">PennOS, a UNIX-like operating system.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_b7878ad5ecbf2506f4125b9d34c97e45.html">util</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">kernel.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../db/d63/array_8h_source.html">array.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/dcb/bitmap_8h_source.html">bitmap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d12/clinkedlist_8h_source.html">clinkedlist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d87/globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d15/spthread_8h_source.html">spthread.h</a>&quot;</code><br />
<code>#include &quot;stdlib.h&quot;</code><br />
</div>
<p><a href="../../d0/daa/kernel_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d5f/structpcb__t.html">pcb_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure stores all required information about a running process.  <a href="../../dc/d5f/structpcb__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac5c325b088ff67236e4fc6616da63bb7" id="r_ac5c325b088ff67236e4fc6616da63bb7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac5c325b088ff67236e4fc6616da63bb7">P_SIGSTOP</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ac5c325b088ff67236e4fc6616da63bb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the STOP signal definition to be used by <a class="el" href="../../d8/d74/sys__call_8c.html#a18e6794b108eea25459bd7fe31de4e76" title="Send a signal to a particular process.">s_kill()</a>. Running processes (ONLY) that receive the P_SIGSTOP signal will become stopped and have their state and process list adjusted accordingly. Note that statechanged will NOT be changed, as this state transition does NOT cause <a class="el" href="../../d8/d74/sys__call_8c.html#a3c0c6c4ae69799354d707ff57ac925d3" title="Wait on a child of the calling process, until it changes state. If nohang is true,...">s_waitpid()</a> to return/unblock.  <br /></td></tr>
<tr class="separator:ac5c325b088ff67236e4fc6616da63bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e7774a26af9a341045a1cc0d34070da" id="r_a3e7774a26af9a341045a1cc0d34070da"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e7774a26af9a341045a1cc0d34070da">P_SIGCONT</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a3e7774a26af9a341045a1cc0d34070da"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the CONTINUE signal definition to be used by <a class="el" href="../../d8/d74/sys__call_8c.html#a18e6794b108eea25459bd7fe31de4e76" title="Send a signal to a particular process.">s_kill()</a>. Stopped processes (ONLY) that receive the P_SIGCONT signal will become running and have their state and process list adjusted accordingly. Note that statechanged will NOT be changed, as this state transition does NOT cause <a class="el" href="../../d8/d74/sys__call_8c.html#a3c0c6c4ae69799354d707ff57ac925d3" title="Wait on a child of the calling process, until it changes state. If nohang is true,...">s_waitpid()</a> to return/unblock.  <br /></td></tr>
<tr class="separator:a3e7774a26af9a341045a1cc0d34070da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a608288786200cfdad154e66b4cd578ae" id="r_a608288786200cfdad154e66b4cd578ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a608288786200cfdad154e66b4cd578ae">P_SIGTER</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a608288786200cfdad154e66b4cd578ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the TERMINATE signal definition to be used by <a class="el" href="../../d8/d74/sys__call_8c.html#a18e6794b108eea25459bd7fe31de4e76" title="Send a signal to a particular process.">s_kill()</a>. Any process that receives the P_SIGTER signal will become zombied and have their state and process list adjusted accordingly. Note that statechanged WILL be changed, as this state transition DOES cause <a class="el" href="../../d8/d74/sys__call_8c.html#a3c0c6c4ae69799354d707ff57ac925d3" title="Wait on a child of the calling process, until it changes state. If nohang is true,...">s_waitpid()</a> to return/unblock.  <br /></td></tr>
<tr class="separator:a608288786200cfdad154e66b4cd578ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a71acfdbc74942780681d06efcc05a0a5" id="r_a71acfdbc74942780681d06efcc05a0a5"><td class="memItemLeft" align="right" valign="top">typedef struct pcb_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a71acfdbc74942780681d06efcc05a0a5">pcb_t</a></td></tr>
<tr class="separator:a71acfdbc74942780681d06efcc05a0a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ab97efa0d1c4aeaf55ff756bf16685854" id="r_ab97efa0d1c4aeaf55ff756bf16685854"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab97efa0d1c4aeaf55ff756bf16685854">process_state_t</a> { <a class="el" href="#ab97efa0d1c4aeaf55ff756bf16685854a1061be6c3fb88d32829cba6f6b2be304">RUNNING</a>
, <a class="el" href="#ab97efa0d1c4aeaf55ff756bf16685854a948b2aee15f52b421fa4770c47bcfe8c">STOPPED</a>
, <a class="el" href="#ab97efa0d1c4aeaf55ff756bf16685854a376c1b6a3f75d283a2efacf737438d61">BLOCKED</a>
, <a class="el" href="#ab97efa0d1c4aeaf55ff756bf16685854acfa05d5a2f18cf6a5976178d9949c512">ZOMBIED</a>
 }</td></tr>
<tr class="memdesc:ab97efa0d1c4aeaf55ff756bf16685854"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the possible states of a process in the system.  <a href="#ab97efa0d1c4aeaf55ff756bf16685854">More...</a><br /></td></tr>
<tr class="separator:ab97efa0d1c4aeaf55ff756bf16685854"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a736760f5a73bbd7d6c9e4607c49837a3" id="r_a736760f5a73bbd7d6c9e4607c49837a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d5f/structpcb__t.html">pcb_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a736760f5a73bbd7d6c9e4607c49837a3">k_proc_create</a> (<a class="el" href="../../dc/d5f/structpcb__t.html">pcb_t</a> *parent)</td></tr>
<tr class="memdesc:a736760f5a73bbd7d6c9e4607c49837a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new child process, inheriting applicable properties from the parent.  <br /></td></tr>
<tr class="separator:a736760f5a73bbd7d6c9e4607c49837a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87071d3f59ebc0d6f626c885eb27c27e" id="r_a87071d3f59ebc0d6f626c885eb27c27e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a87071d3f59ebc0d6f626c885eb27c27e">k_proc_cleanup</a> (<a class="el" href="../../dc/d5f/structpcb__t.html">pcb_t</a> *proc)</td></tr>
<tr class="memdesc:a87071d3f59ebc0d6f626c885eb27c27e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up a terminated/finished thread's resources. This may include freeing the PCB, handling children, etc.  <br /></td></tr>
<tr class="separator:a87071d3f59ebc0d6f626c885eb27c27e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3e7774a26af9a341045a1cc0d34070da" name="a3e7774a26af9a341045a1cc0d34070da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e7774a26af9a341045a1cc0d34070da">&#9670;&#160;</a></span>P_SIGCONT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define P_SIGCONT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the CONTINUE signal definition to be used by <a class="el" href="../../d8/d74/sys__call_8c.html#a18e6794b108eea25459bd7fe31de4e76" title="Send a signal to a particular process.">s_kill()</a>. Stopped processes (ONLY) that receive the P_SIGCONT signal will become running and have their state and process list adjusted accordingly. Note that statechanged will NOT be changed, as this state transition does NOT cause <a class="el" href="../../d8/d74/sys__call_8c.html#a3c0c6c4ae69799354d707ff57ac925d3" title="Wait on a child of the calling process, until it changes state. If nohang is true,...">s_waitpid()</a> to return/unblock. </p>

</div>
</div>
<a id="ac5c325b088ff67236e4fc6616da63bb7" name="ac5c325b088ff67236e4fc6616da63bb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5c325b088ff67236e4fc6616da63bb7">&#9670;&#160;</a></span>P_SIGSTOP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define P_SIGSTOP&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the STOP signal definition to be used by <a class="el" href="../../d8/d74/sys__call_8c.html#a18e6794b108eea25459bd7fe31de4e76" title="Send a signal to a particular process.">s_kill()</a>. Running processes (ONLY) that receive the P_SIGSTOP signal will become stopped and have their state and process list adjusted accordingly. Note that statechanged will NOT be changed, as this state transition does NOT cause <a class="el" href="../../d8/d74/sys__call_8c.html#a3c0c6c4ae69799354d707ff57ac925d3" title="Wait on a child of the calling process, until it changes state. If nohang is true,...">s_waitpid()</a> to return/unblock. </p>

</div>
</div>
<a id="a608288786200cfdad154e66b4cd578ae" name="a608288786200cfdad154e66b4cd578ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a608288786200cfdad154e66b4cd578ae">&#9670;&#160;</a></span>P_SIGTER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define P_SIGTER&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the TERMINATE signal definition to be used by <a class="el" href="../../d8/d74/sys__call_8c.html#a18e6794b108eea25459bd7fe31de4e76" title="Send a signal to a particular process.">s_kill()</a>. Any process that receives the P_SIGTER signal will become zombied and have their state and process list adjusted accordingly. Note that statechanged WILL be changed, as this state transition DOES cause <a class="el" href="../../d8/d74/sys__call_8c.html#a3c0c6c4ae69799354d707ff57ac925d3" title="Wait on a child of the calling process, until it changes state. If nohang is true,...">s_waitpid()</a> to return/unblock. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a71acfdbc74942780681d06efcc05a0a5" name="a71acfdbc74942780681d06efcc05a0a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71acfdbc74942780681d06efcc05a0a5">&#9670;&#160;</a></span>pcb_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct pcb_t pcb_t</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ab97efa0d1c4aeaf55ff756bf16685854" name="ab97efa0d1c4aeaf55ff756bf16685854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab97efa0d1c4aeaf55ff756bf16685854">&#9670;&#160;</a></span>process_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ab97efa0d1c4aeaf55ff756bf16685854">process_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines the possible states of a process in the system. </p>
<p>This enumeration lists all the possible states that a process could be in at any given time. It is used within the <a class="el" href="../../dc/d5f/structpcb__t.html" title="This structure stores all required information about a running process.">pcb_t</a> structure to track the current state of each process. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab97efa0d1c4aeaf55ff756bf16685854a1061be6c3fb88d32829cba6f6b2be304" name="ab97efa0d1c4aeaf55ff756bf16685854a1061be6c3fb88d32829cba6f6b2be304"></a>RUNNING&#160;</td><td class="fielddoc"><p>Process is currently executing. A process enters the RUNNING state when the scheduler selects it for execution, typically from the READY state. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab97efa0d1c4aeaf55ff756bf16685854a948b2aee15f52b421fa4770c47bcfe8c" name="ab97efa0d1c4aeaf55ff756bf16685854a948b2aee15f52b421fa4770c47bcfe8c"></a>STOPPED&#160;</td><td class="fielddoc"><p>Process is not executing, but can be resumed. A process should only become STOPPED if signaled by s_kill, recieving the P_SIGSTOP signal. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab97efa0d1c4aeaf55ff756bf16685854a376c1b6a3f75d283a2efacf737438d61" name="ab97efa0d1c4aeaf55ff756bf16685854a376c1b6a3f75d283a2efacf737438d61"></a>BLOCKED&#160;</td><td class="fielddoc"><p>Process is not executing, waiting for an event to occur. A process should only be blocked if it made a call to either s_waitpid or s_sleep. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab97efa0d1c4aeaf55ff756bf16685854acfa05d5a2f18cf6a5976178d9949c512" name="ab97efa0d1c4aeaf55ff756bf16685854acfa05d5a2f18cf6a5976178d9949c512"></a>ZOMBIED&#160;</td><td class="fielddoc"><p>Process has finished execution but awaits resource cleanup. A process enters the ZOMBIED state after it has finished its execution and is waiting for the parent process to read its exit status. If the parent process ever exits prior to reading exit status, this process should immediately cleaned up. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a87071d3f59ebc0d6f626c885eb27c27e" name="a87071d3f59ebc0d6f626c885eb27c27e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87071d3f59ebc0d6f626c885eb27c27e">&#9670;&#160;</a></span>k_proc_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void k_proc_cleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d5f/structpcb__t.html">pcb_t</a> *</td>          <td class="paramname"><span class="paramname"><em>proc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clean up a terminated/finished thread's resources. This may include freeing the PCB, handling children, etc. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">proc</td><td>This is a pointer to the process control block of a process that has terminated. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a736760f5a73bbd7d6c9e4607c49837a3" name="a736760f5a73bbd7d6c9e4607c49837a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a736760f5a73bbd7d6c9e4607c49837a3">&#9670;&#160;</a></span>k_proc_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d5f/structpcb__t.html">pcb_t</a> * k_proc_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d5f/structpcb__t.html">pcb_t</a> *</td>          <td class="paramname"><span class="paramname"><em>parent</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new child process, inheriting applicable properties from the parent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>This is a pointer to the process control block of the parent, from which it inherits. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Reference to the child PCB. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
